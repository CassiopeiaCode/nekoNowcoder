# FindingtheOrder - 题解

### 标签与难度
> **标签**: 几何, 数学, Ad-hoc, 四边形性质, 思维题
> **难度**: 1200

## 题目大意喵~

各位算法大师们，安喵~！这里是你们最喜欢的小我，今天我们要一起解决一个有趣的几何小谜题，喵~

题目是这样的：想象有两条平行的直线，我们叫它们直线L1和直线L2。
- 在直线L1上，有两个不同的点，我们称之为 $A_1$ 和 $A_2$。
- 在直线L2上，也有两个不同的点，我们称之为 $B_1$ 和 $B_2$。

现在，我们知道这四个点之间的四条交叉距离：
- $a$: $A_1$ 和 $B_1$ 之间的距离
- $b$: $A_1$ 和 $B_2$ 之间的距离
- $c$: $A_2$ 和 $B_1$ 之间的距离
- $d$: $A_2$ 和 $B_2$ 之间的距离

但是呢，我们不知道点 $B_1$ 和 $B_2$ 在直线L2上的具体顺序。我们的任务就是，根据这四个距离，判断出它们的相对顺序。

如果 $B_1, B_2$ 的顺序和 $A_1, A_2$ 的投影顺序相同，我们就输出 `AB//CD`。
如果 $B_1, B_2$ 的顺序和 $A_1, A_2$ 的投影顺序相反，我们就输出 `AB//DC`。

是不是听起来很有趣呀？就像在玩一个连线猜谜游戏！

## 解题思路分析

这道题看起来是关于点和距离的，第一反应可能会想建立坐标系，用代数方法硬解，但这会非常复杂，喵~！聪明的我会寻找更优雅的几何方法，呐。

让我们把这四个点 $A_1, A_2, B_1, B_2$ 看作一个**四边形**的顶点。因为这四个点分布在两条平行线上，所以它们总能构成一个**凸四边形**（也就是没有边会向内凹的四边形）。

现在，我们来分析两种可能的情况：

**情况一：顺序相同 (Uncrossed / Non-intersecting)**

假设我们固定 $A_1$ 在 $A_2$ 的左边。如果 $B_1$ 也在 $B_2$ 的左边，那么这四个点构成的凸四边形，按顺序连接起来就是 $A_1 \rightarrow A_2 \rightarrow B_2 \rightarrow B_1 \rightarrow A_1$。

```
   A1-------A2   (Line 1)
   / \     / \
  /   \   /   \
 a /     \ /     \ d
  /       X       \
 /       / \       \
b /     /   \     \ c
 /     /     \     \
B1-------B2   (Line 2)
```

在这种情况下：
- 线段 $A_1B_1$ (长度为 $a$) 和 $A_2B_2$ (长度为 $d$) 是这个梯形的两条**腰**（非平行的对边）。
- 线段 $A_1B_2$ (长度为 $b$) 和 $A_2B_1$ (长度为 $c$) 是这个梯形的两条**对角线**。

**情况二：顺序相反 (Crossed / Intersecting)**

还是假设 $A_1$ 在 $A_2$ 的左边。如果 $B_2$ 在 $B_1$ 的左边，那么这四个点构成的凸四边形，按顺序连接起来就是 $A_1 \rightarrow A_2 \rightarrow B_1 \rightarrow B_2 \rightarrow A_1$。

```
   A1-------A2   (Line 1)
   \  \   /  /
    \  \ /  /
     \  X  /
      \/ \/
     / /\ \
    / /  \ \
   / /    \ \
  b /      \ c
   /        \
B2-------B1   (Line 2)
  \        /
   \      /
    a    d   (a和d是交叉的对角线)
```

在这种情况下：
- 线段 $A_1B_2$ (长度为 $b$) 和 $A_2B_1$ (长度为 $c$) 成了这个梯形的两条**腰**。
- 线段 $A_1B_1$ (长度为 $a$) 和 $A_2B_2$ (长度为 $d$) 成了这个梯形的两条**对角线**。

**关键的几何定理！**

这里有一个非常重要的几何性质，喵~：**对于任何一个凸四边形，其两条对角线的长度之和，一定大于任意一对对边长度之和。**

为什么呢？我们可以用三角形两边之和大于第三边的性质来简单证明。假设四边形是 $PQRS$，对角线交于点 $O$。
在 $\triangle PQO$ 中, $PO+QO > PQ$。
在 $\triangle RSO$ 中, $RO+SO > RS$。
两式相加：$(PO+RO) + (QO+SO) > PQ+RS$。
而 $PR = PO+RO$，$QS = QO+SO$，所以 $PR+QS > PQ+RS$。对另一对对边也同理。

**把定理用起来！**

现在我们可以把这个超有用的定理应用到我们的两种情况里啦：

1.  **对于情况一（顺序相同）**：
    - 对角线是 $A_1B_2$ 和 $A_2B_1$，长度和为 $b+c$。
    - 一对对边是 $A_1B_1$ 和 $A_2B_2$，长度和为 $a+d$。
    - 根据定理，我们有：$b+c > a+d$。

2.  **对于情况二（顺序相反）**：
    - 对角线是 $A_1B_1$ 和 $A_2B_2$，长度和为 $a+d$。
    - 一对对边是 $A_1B_2$ 和 $A_2B_1$，长度和为 $b+c$。
    - 根据定理，我们有：$a+d > b+c$。

**得出结论！**

所以，问题的答案就非常清晰了，喵！我们只需要比较 $b+c$ 和 $a+d$ 的大小就可以判断是哪种情况了！

- 如果 $b+c > a+d$，说明是情况一，顺序相同，对应输出 `AB//CD`。
- 如果 $a+d > b+c$，说明是情况二，顺序相反，对应输出 `AB//DC`。
- 如果 $a+d = b+c$ 呢？这种情况在严格的凸四边形中不会发生，它通常出现在一些退化情况，比如四点共线或者形成一个“蝴蝶结”形的自相交四边形。在我们的题目背景下（两平行线），这可以归为交叉情况。所以，我们把 $a+d \ge b+c$ 都看作是顺序相反的情况。

于是，一个看似复杂的几何问题，就变成了一个简单的 `if-else` 判断，是不是很神奇呢，喵~

## 代码实现

这是本我根据上面的思路，精心重构的一份代码~ 希望能帮到你，呐！

```cpp
#include <iostream>
#include <string>

// 使用一个函数来处理每个测试用例，让代码结构更清晰喵~
void solve() {
    // 为了让大家更好地理解，我们用更清晰的变量名来接收输入
    // a: dist(A1, B1), b: dist(A1, B2), c: dist(A2, B1), d: dist(A2, B2)
    long long dist_a, dist_b, dist_c, dist_d;
    std::cin >> dist_a >> dist_b >> dist_c >> dist_d;

    // 根据我们的几何推导：
    // 如果是顺序相同的情况 (Uncrossed)，那么 b 和 c 是对角线，a 和 d 是对边。
    // 根据凸四边形性质：对角线之和 > 对边之和。
    // 所以 b + c > a + d。
    long long sum_crossed = dist_b + dist_c;

    // 如果是顺序相反的情况 (Crossed)，那么 a 和 d 是对角线，b 和 c 是对边。
    // 根据凸四边形性质：对角线之和 > 对边之和。
    // 所以 a + d > b + c。
    long long sum_parallel = dist_a + dist_d;
    
    // 题目中 "AB//CD" 对应顺序相同的情况
    if (sum_crossed > sum_parallel) {
        std::cout << "AB//CD" << std::endl;
    } 
    // 题目中 "AB//DC" 对应顺序相反的情况 (包括相等时的退化情况)
    else {
        std::cout << "AB//DC" << std::endl;
    }
}

int main() {
    // 加速输入输出，让程序跑得像猫一样快！
    std::ios_base::sync_with_stdio(false);
    std::cin.tie(NULL);

    int t;
    std::cin >> t;
    while (t--) {
        solve();
    }

    return 0;
}
```

## 复杂度分析

- **时间复杂度**: $O(1)$
  对于每一个测试用例，我们只进行了几次读入、几次加法和一次比较，这些都是常数时间的操作。所以总的时间复杂度是 $O(T)$，其中 $T$ 是测试用例的数量，单次处理是 $O(1)$ 的。

- **空间复杂度**: $O(1)$
  我们只使用了几个变量来存储输入的距离和它们的和，没有使用任何随输入规模增大的数据结构。因此，空间复杂度是常数级别的，喵~

## 知识点总结

这道题真是太棒了，它告诉我们：

1.  **几何直觉很重要**：遇到几何问题时，不要立刻就钻进代数计算的死胡同。先画画图，从几何图形的性质入手，往往能找到更简单、更优雅的捷径。
2.  **凸四边形性质**：核心知识点是“凸四边形对角线之和大于对边之和”。这是一个非常有用且基础的几何定理，记住它能在很多问题中派上用场！
3.  **问题转化**：成功的将一个关于“点和顺序”的判断问题，转化为了一个关于“线段长度”的不等式比较问题。这种抽象和转化的能力是成为算法高手的必备技能哦！

希望这次的题解对你有帮助！如果还有其他问题，随时可以来找我玩，喵~ 我们下次再见！